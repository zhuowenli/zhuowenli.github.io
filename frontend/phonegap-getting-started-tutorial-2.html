<!DOCTYPE html>
<html lang="en">
<head>
    
<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,minimum-scale=1,maximum-scale=1">


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />



  <meta name="description" content="PhoneGap入门教程(2) - 内核事件和基本用法"/>




  <meta name="keywords" content="JavaScript,PhoneGap,Android,Webapp," />





    <link rel="alternate" href="/atom.xml" title="Zhuo Wenli">




    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=1.0.0" />



<link rel="canonical" href="https://www.zhuowenli.com/frontend/phonegap-getting-started-tutorial-2.html"/>


<meta name="description" content="PhoneGap的大量操作都是通过响应事件来完成，在PhoneGap的整个生命周期内有很多内建的事件。 通过事件处理，可以获取设备的信息，并根据这些信息来实现一个应用程序。">
<meta property="og:type" content="article">
<meta property="og:title" content="PhoneGap入门教程(2) - 内核事件和基本用法">
<meta property="og:url" content="https://www.zhuowenli.com/frontend/phonegap-getting-started-tutorial-2.html">
<meta property="og:site_name" content="Zhuo Wenli">
<meta property="og:description" content="PhoneGap的大量操作都是通过响应事件来完成，在PhoneGap的整个生命周期内有很多内建的事件。 通过事件处理，可以获取设备的信息，并根据这些信息来实现一个应用程序。">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2015-02-02T00:00:00.000Z">
<meta property="article:modified_time" content="2022-06-18T02:56:11.596Z">
<meta property="article:author" content="Zhuo Wenli">
<meta property="article:tag" content="JavaScript">
<meta property="article:tag" content="PhoneGap">
<meta property="article:tag" content="Android">
<meta property="article:tag" content="Webapp">
<meta name="twitter:card" content="summary">


<link rel="stylesheet" type="text/css" href="/css/style.css?v=1.0.0" />



<script type="text/javascript">
    var themeConfig = {
        color: 'Default',
        favicon: {
            enable: true,
            icon: '/favicon.ico',
            hide_text: '(●—●)喔哟，崩溃啦！',
            show_text: '(/≧▽≦/)咦！又好了！',
        }
    };
</script>



    <script id="baidu_analytics">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?7278e0ce3cabf14a3798ac2126b733d9";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-171827500-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-171827500-1');
</script>


    <title> PhoneGap入门教程(2) - 内核事件和基本用法 - Zhuo Wenli </title>
<meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/atom.xml" title="Zhuo Wenli" type="application/atom+xml">
</head>
<body>
    <div id="page">
        <header id="masthead">
<h1 class="site-title">
    <a href="/." class="logo">Zhuo Wenli</a>
</h1>


        </header>

        <div id="content">
            
    
<article class="post">
    <header class="post-header">
        <h1 class="post-title">PhoneGap入门教程(2) - 内核事件和基本用法</h1>
        <time class="post-time">
            Feb 02 2015
        </time>
    </header>

    <div class="post-content">
        <p>PhoneGap的大量操作都是通过响应事件来完成，在PhoneGap的整个生命周期内有很多内建的事件。</p>
<p>通过事件处理，可以获取设备的信息，并根据这些信息来实现一个应用程序。</p>
<a id="more"></a>

<h2 id="PhoneGap基本开发"><a href="#PhoneGap基本开发" class="headerlink" title="PhoneGap基本开发"></a>PhoneGap基本开发</h2><p>一旦创建了工程，PhoneGap的开发就变得非常简单，只需要编写 www 目录下的index.html文件就可以进行开发了。对于Android工程，这个目录的位置在F:\kypapp\platforms\android\assets\www下。</p>
<p>在开发的过程中，需要引用的相关资源，例如图片、CSS样式文件、JS文件等，这些文件也必须放在www目录及其子目录底下才正被正常调用。</p>
<p>打开index.html，你会发现这是一个标准的html5文档。不同的是必须引用cordova.js这个文件，这是网页与设备实现交互功能的关键。</p>
<p>phonegap.js同cordova.js是一致的，可以引用任意一个。还有cordova_plugins.js文件也是必须引用的，这个是很重要的文件，用于定义插件列表。</p>
<p>其他不需要的资源就可以删掉了。</p>
<h2 id="事件处理"><a href="#事件处理" class="headerlink" title="事件处理"></a>事件处理</h2><p>PhoneGap的整个生命周期可能产生下面所列的事件，这些事件默认是内置的，无需安装插件。</p>
<ul>
<li>deviceready：PhoneGap在完全载入时，将触发该事件</li>
<li>pause：      当应用程序放在后台运行时，将触发该事件</li>
<li>resume：     当应用程序从后台恢复到前台时，将触发该事件。</li>
<li>backbutton： 在使用者按後退按钮时，将触发该事件。</li>
<li>menubutton： 在使用者按功能表按钮时，将触发该事件。</li>
<li>searchbutton：當使用者按 Android 上的搜尋按钮时，将触发该事件。</li>
<li>startcallbutton： 當使用者按下開始呼叫按钮时，将触发该事件。</li>
<li>endcallbutton：   當使用者按下結束通話按钮时，将触发该事件。</li>
<li>volumedownbutton：当按下volume down调低音量按钮时触发事件</li>
<li>volumeupbutton：  当按下volume up调高音量按钮时触发事件</li>
</ul>
<p>但是，并不是所有的设备都支持这些事件，有一些可能是设备不支持，或者有的手机没有搜索、通话等按钮。</p>
<h3 id="内核事件"><a href="#内核事件" class="headerlink" title="内核事件"></a>内核事件</h3><p>内核事件是设备运行时产生的包括<code>deviceready</code>、<code>pause</code>、<code>resume</code>事件。</p>
<h4 id="deviceready事件"><a href="#deviceready事件" class="headerlink" title="deviceready事件"></a>deviceready事件</h4><p>只有当PhoneGap被完全加载才会触发该事件，对于任何一个PhoneGap应用程序来说，这个事件都十分重要，是一定会使用的。</p>
<p>为了安全起见，应该在DOM加载完毕后使用<code>document.addEventListener</code>附加<code>deviceready</code>事件监听器。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">"deviceready"</span>, onDeviceReady, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onDeviceReady</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// Now safe to use device APIs</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>完整实例：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>Hello World<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"app"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"cordova.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line"><span class="actionscript">         <span class="comment">// 当DOM加载完毕，注册deviceready事件监听</span></span></span><br><span class="line"><span class="actionscript">         <span class="function"><span class="keyword">function</span> <span class="title">onLoad</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">          <span class="built_in">document</span>.addEventListener(<span class="string">"deviceready"</span>, onDeviceReady, <span class="literal">false</span>);</span></span><br><span class="line">         &#125;</span><br><span class="line"><span class="actionscript">         <span class="comment">// 注册事件监听</span></span></span><br><span class="line"><span class="actionscript">         <span class="function"><span class="keyword">function</span> <span class="title">onDeviceReady</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">          <span class="comment">//...</span></span></span><br><span class="line">         &#125;</span><br><span class="line">         onLoad();</span><br><span class="line">        <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="pause和resume事件"><a href="#pause和resume事件" class="headerlink" title="pause和resume事件"></a>pause和resume事件</h4><p>当程序被放到后台的时候执行pause事件，当程序从后台恢复到前台执行的时候将触发resume事件。</p>
<p>注册相应的监听，可以用于处理相应的事件：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onLoad</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"> <span class="comment">// 当DOM加载完毕，注册deviceready事件监听</span></span><br><span class="line"> <span class="built_in">document</span>.addEventListener(<span class="string">"deviceready"</span>, onDeviceReady, <span class="literal">false</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onDeviceReady</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"> <span class="comment">// 注册事件监听</span></span><br><span class="line"> <span class="built_in">document</span>.addEventListener(<span class="string">"pause"</span>, onPause, <span class="literal">false</span>);</span><br><span class="line"> <span class="built_in">document</span>.addEventListener(<span class="string">"resume"</span>, onResume, <span class="literal">false</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 处理pause事件</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onPause</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"> <span class="built_in">console</span>.log(<span class="string">"-------------------pause-------------------"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 处理resume事件</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onResume</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"> <span class="built_in">console</span>.log(<span class="string">"-------------------resume-------------------"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="侦听设备按键"><a href="#侦听设备按键" class="headerlink" title="侦听设备按键"></a>侦听设备按键</h3><p>一些设备带有功能键，如标准安卓设备就带有菜单键、返回键、搜索键等。在安卓4.0后可以取消上下左右、通话、搜索等按键。PhoneGap应用程序可以检测这些按键是否被点击，通过事件处理程序就可以自定义对这些操作的响应。</p>
<h4 id="backbutton事件"><a href="#backbutton事件" class="headerlink" title="backbutton事件"></a>backbutton事件</h4><p>当用户点击后退按键时触发该事件，注意不是所有设备都提供了返回按键，因此一些设备不支持该事件。</p>
<p>当点击后退按钮时，系统一般会有一个默认的响应行为。如果想重写该行为，可以通过注册一个事件监听器来监听该行为。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">"backbutton"</span>, yourCallbackFunction, <span class="literal">false</span>);</span><br></pre></td></tr></table></figure>

<p>如果注册了该事件，默认的行为将会被取消掉。例如在Android系统上，点击后退按钮可以把程序放到后台，但是注册该事件后此默认行为将会被取消掉。</p>
<p>iOS没有后退键，所以不支持该程序。</p>
<h4 id="menubutton事件"><a href="#menubutton事件" class="headerlink" title="menubutton事件"></a>menubutton事件</h4><p>当用户点击菜单按键时触发该事件，注意不是所有设备都提供了返回按键，因此一些设备不支持该事件。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">"menubutton"</span>, yourCallbackFunction, <span class="literal">false</span>);</span><br></pre></td></tr></table></figure>

<p>iOS没有菜单键，所以不支持该程序。</p>
<h4 id="searchbutton事件"><a href="#searchbutton事件" class="headerlink" title="searchbutton事件"></a>searchbutton事件</h4><p>当用户点击搜索按键时触发该事件，注意不是所有设备都提供了返回按键，因此一些设备不支持该事件。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">"searchbutton"</span>, yourCallbackFunction, <span class="literal">false</span>);</span><br></pre></td></tr></table></figure>

<p>iOS没有搜索键，所以不支持该程序。</p>
<h4 id="startcallbutton事件"><a href="#startcallbutton事件" class="headerlink" title="startcallbutton事件"></a>startcallbutton事件</h4><p>当用户点击通话按键时触发该事件，注意不是所有设备都提供了返回按键，因此一些设备不支持该事件。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">"startcallbutton"</span>, yourCallbackFunction, <span class="literal">false</span>);</span><br></pre></td></tr></table></figure>

<p>注意，该事件仅适用于BlackBerry(OS10.0+)，Android和iOS不支持该事件。</p>
<h4 id="endcallbutton事件"><a href="#endcallbutton事件" class="headerlink" title="endcallbutton事件"></a>endcallbutton事件</h4><p>当用户点击挂机按键（即通话结束键）时触发该事件，注意不是所有设备都提供了返回按键，因此一些设备不支持该事件。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">"endcallbutton"</span>, yourCallbackFunction, <span class="literal">false</span>);</span><br></pre></td></tr></table></figure>

<p>注意，该事件仅适用于BlackBerry(OS10.0+)，Android和iOS不支持该事件。</p>
<h4 id="volumeupbutton事件"><a href="#volumeupbutton事件" class="headerlink" title="volumeupbutton事件"></a>volumeupbutton事件</h4><p>当用户点击调高音量按键时触发该事件，注意不是所有设备都提供了返回按键，因此一些设备不支持该事件。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">"volumeupbutton"</span>, yourCallbackFunction, <span class="literal">false</span>);</span><br></pre></td></tr></table></figure>

<p>注意，该事件仅适用于BlackBerry(OS10.0+)，Android和iOS不支持该事件。</p>
<h4 id="volumedownbutton事件"><a href="#volumedownbutton事件" class="headerlink" title="volumedownbutton事件"></a>volumedownbutton事件</h4><p>当用户点击调低音量按键时触发该事件，注意不是所有设备都提供了返回按键，因此一些设备不支持该事件。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">"volumedownbutton"</span>, yourCallbackFunction, <span class="literal">false</span>);</span><br></pre></td></tr></table></figure>

<p>注意，该事件仅适用于BlackBerry(OS10.0+)，Android和iOS不支持该事件。</p>
<hr>
<blockquote>
<p>相关文章:</p>
<p><a href="/frontend/phonegap-getting-started-tutorial-1.html">PhoneGap入门教程(1) - 环境安装与配置</a></p>
<p>PhoneGap入门教程(2) - 内核事件和基本用法</p>
<p><a href="/frontend/phonegap-getting-started-tutorial-3.html">PhoneGap入门教程(3) - 原生插件安装和管理</a></p>
<p><a href="/frontend/phonegap-getting-started-tutorial-4.html">PhoneGap入门教程(4) - 电量变化侦测</a></p>
<p><a href="/frontend/phonegap-getting-started-tutorial-5.html">PhoneGap入门教程(5) - 程序内置浏览器窗口</a></p>
<p><a href="/frontend/phonegap-getting-started-tutorial-6.html">PhoneGap入门教程(6) - 设备信息和系统提示</a></p>
</blockquote>
<br>

<blockquote>
<p>参考资料：</p>
<p><a href="http://cordova.apache.org/docs/zh/3.1.0/cordova_events_events.md.html#deviceready" target="_blank" rel="noopener">Apache Cordova Documentation</a></p>
</blockquote>

    </div>

    <footer class="post-footer">
        
        <div class="post-tags">
            
            <a href="/tags/JavaScript/">JavaScript</a>
            
            <a href="/tags/PhoneGap/">PhoneGap</a>
            
            <a href="/tags/Android/">Android</a>
            
            <a href="/tags/Webapp/">Webapp</a>
            
        </div>
        

        
        
  <nav class="post-nav">
    
      <a class="prev" href="/frontend/phonegap-getting-started-tutorial-3.html">
        <i class="iconfont icon-left"></i>
        <span class="prev-text nav-default">PhoneGap入门教程(3) - 原生插件安装和管理</span>
        <span class="prev-text nav-mobile">Prev</span>
      </a>
    
    
      <a class="next" href="/frontend/phonegap-getting-started-tutorial-1.html">
        <span class="next-text nav-default">PhoneGap入门教程(1) - 环境搭建与配置</span>
        <span class="prev-text nav-mobile">Next</span>
        <i class="iconfont icon-right"></i>
      </a>
    
  </nav>


        
            
    <div class="comments" id="comments">
        
            <div id="gitalk-container"></div>
        
    </div>


        
    </footer>
</article>


        </div>

        <footer id="colophon"><span class="copyright-year">
    
        &copy;
    
        2016 -
    
    2022
    <span class="footer-author">Zhuo Wenli.</span>
    <span class="power-by">Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>.</span>
    <span class="design-by">Designed by <a href="https://www.zhuowenli.com/">zhuowenli</a></span>
</span>

<nav id="nav-bottom">
    
        <ul id="menu-bottom" class="nav-bottom-items">
            
                <li class="menu-item">
                    <a href="/">
                        
                        
                            Home
                        
                    </a>
                </li>
            
                <li class="menu-item">
                    <a href="/archives">
                        
                        
                            Archives
                        
                    </a>
                </li>
            
                <li class="menu-item">
                    <a href="/about">
                        
                        
                            About
                        
                    </a>
                </li>
            
        </ul>
    
</nav>

        </footer>

        <div class="back-to-top" id="back-to-top">
            <i class="iconfont icon-up"></i>
        </div>
    </div>
    
    


<script src="/lib/gitalk.min.js"></script>
<script type="text/javascript">
    const gitalk = new Gitalk({
        clientID: '3a683f311ce3460b686d',
        clientSecret: '264685b8506d937c73b468584847c3b2347bdcfe',
        repo: 'zhuowenli.github.io',
        owner: 'zhuowenli',
        admin: 'zhuowenli'.split(','),
        pagerDirection: 'first',
        id: `PhoneGap入门教程(2) - 内核事件和基本用法`,
        number: 29,
        distractionFreeMode: true
    });
    if (document.querySelector('#gitalk-container')) {
        gitalk.render('gitalk-container');
    }
</script>



    
    


  
    <script type="text/javascript" src="/lib/jquery-3.1.1.min.js"></script>
  


    <script type="text/javascript" src="/js/theme.js?v=1.0.0"></script>
<script type="text/javascript" src="/js/bootstrap.js?v=1.0.0"></script>

</body>
</html>
